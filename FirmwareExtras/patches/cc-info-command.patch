*** Begin Patch
*** Update File: brWheel_my/Config.h
@@
 //#define USE_PROMICRO    // milos, uncomment if you are using Arduino ProMicro board (leave commented for Leonardo or Micro variants)
 #define USE_EEPROM     // milos, uncomment to enable loading/saving settings from EEPROM (if commented out, default settings will be loaded on each powerup, one needs to reconfigure firmware defautls or use GUI configuration after each powerup) 
+// Optional: enable minimal Control Center protocol extensions (INFO command)
+//#define USE_CC_PROTOCOL
*** End Patch

*** Begin Patch
*** Update File: brWheel_my/SerialInterface.ino
@@
 void configCDC() { // milos, virtual serial port firmware configuration interface
   if (CONFIG_SERIAL.available() > 0) {
     u8 c = toUpper(CONFIG_SERIAL.read());
     //DEBUG_SERIAL.println(c);
     s32 temp, temp1;
     f32 wheelAngle;
     u8 ffb_temp;
     switch (c) {
+      case 'I':
#ifdef USE_CC_PROTOCOL
        // INFO: firmware version + capabilities bitmask + quick config summary
        CONFIG_SERIAL.print("fw-");
        CONFIG_SERIAL.print("v");
        CONFIG_SERIAL.print(FIRMWARE_VERSION, DEC);
#ifdef USE_AUTOCALIB
        CONFIG_SERIAL.print("a");
#endif
#ifdef USE_TWOFFBAXIS
        CONFIG_SERIAL.print("b");
#endif
#ifdef USE_ZINDEX
        CONFIG_SERIAL.print("z");
#endif
#ifdef USE_CENTERBTN
        CONFIG_SERIAL.print("c");
#endif
#ifndef USE_QUADRATURE_ENCODER
        CONFIG_SERIAL.print("d");
#endif
#ifdef USE_AS5600
        CONFIG_SERIAL.print("w");
#endif
#ifdef USE_TCA9548
        CONFIG_SERIAL.print("u");
#endif
#ifdef USE_HATSWITCH
        CONFIG_SERIAL.print("h");
#endif
#ifdef USE_ADS1015
        CONFIG_SERIAL.print("s");
#endif
#ifdef AVG_INPUTS
        CONFIG_SERIAL.print("i");
#endif
#ifdef USE_BTNMATRIX
        CONFIG_SERIAL.print("t");
#endif
#ifdef USE_XY_SHIFTER
        CONFIG_SERIAL.print("f");
#endif
#ifdef USE_EXTRABTN
        CONFIG_SERIAL.print("e");
#endif
#ifdef USE_SPLITAXIS
        CONFIG_SERIAL.print("k");
#endif
#ifdef USE_ANALOGFFBAXIS
        CONFIG_SERIAL.print("x");
#endif
#ifdef USE_SHIFT_REGISTER
        CONFIG_SERIAL.print("n");
#endif
#ifdef USE_SN74ALS166N
        CONFIG_SERIAL.print("r");
#endif
#ifdef USE_LOAD_CELL
        CONFIG_SERIAL.print("l");
#endif
#ifdef USE_MCP4725
        CONFIG_SERIAL.print("g");
#endif
#ifndef USE_EEPROM
        CONFIG_SERIAL.print("p");
#endif
#ifdef USE_PROMICRO
        CONFIG_SERIAL.print("m");
#endif

        // capabilities bitmask (matches Control Center CapabilityFlags)
        uint32_t cap = 0;
#ifdef USE_ZINDEX
        cap |= (1u << 0);
#endif
#ifdef USE_AS5600
        cap |= (1u << 1);
#endif
#ifdef USE_TWOFFBAXIS
        cap |= (1u << 2);
#endif
#ifdef USE_HATSWITCH
        cap |= (1u << 3);
#endif
#ifdef USE_ADS1015
        cap |= (1u << 4);
#endif
#ifdef AVG_INPUTS
        cap |= (1u << 5);
#endif
#ifdef USE_BTNMATRIX
        cap |= (1u << 6);
#endif
#ifdef USE_XY_SHIFTER
        cap |= (1u << 7);
#endif
#ifdef USE_EXTRABTN
        cap |= (1u << 8);
#endif
#ifdef USE_SPLITAXIS
        cap |= (1u << 9);
#endif
#ifdef USE_ANALOGFFBAXIS
        cap |= (1u << 10);
#endif
#ifdef USE_SHIFT_REGISTER
        cap |= (1u << 11);
#endif
#ifdef USE_SN74ALS166N
        cap |= (1u << 12);
#endif
#ifdef USE_LOAD_CELL
        cap |= (1u << 13);
#endif
#ifdef USE_MCP4725
        cap |= (1u << 14);
#endif
#ifndef USE_EEPROM
        cap |= (1u << 15);
#endif
#ifdef USE_PROMICRO
        cap |= (1u << 16);
#endif
        cap |= (1u << 20); // Control Center: calibration info
        cap |= (1u << 21); // Control Center: calibration set
        CONFIG_SERIAL.print(' ');
        CONFIG_SERIAL.print(cap, DEC);
        CONFIG_SERIAL.print(' ');
        CONFIG_SERIAL.print(ROTATION_DEG);
+        CONFIG_SERIAL.print(' ');
+        CONFIG_SERIAL.print(configGeneralGain);
+        CONFIG_SERIAL.print(' ');
+        CONFIG_SERIAL.print(configDamperGain);
+        CONFIG_SERIAL.print(' ');
+        CONFIG_SERIAL.print(configFrictionGain);
+        CONFIG_SERIAL.print(' ');
+        CONFIG_SERIAL.print(configConstantGain);
+        CONFIG_SERIAL.print(' ');
+        CONFIG_SERIAL.print(configPeriodicGain);
+        CONFIG_SERIAL.print(' ');
+        CONFIG_SERIAL.print(configSpringGain);
+        CONFIG_SERIAL.print(' ');
+        CONFIG_SERIAL.print(configInertiaGain);
+        CONFIG_SERIAL.print(' ');
+        CONFIG_SERIAL.print(configCenterGain);
+        CONFIG_SERIAL.print(' ');
+        CONFIG_SERIAL.print(configStopGain);
+        CONFIG_SERIAL.print(' ');
+        CONFIG_SERIAL.print(MM_MIN_MOTOR_TORQUE);
+        CONFIG_SERIAL.print(' ');
+        CONFIG_SERIAL.print(LC_scaling);
+        CONFIG_SERIAL.print(' ');
+        CONFIG_SERIAL.print(effstate, DEC);
+        CONFIG_SERIAL.print(' ');
+        CONFIG_SERIAL.print(MM_MAX_MOTOR_TORQUE);
+        CONFIG_SERIAL.print(' ');
+        CONFIG_SERIAL.print(CPR);
+        CONFIG_SERIAL.print(' ');
+        CONFIG_SERIAL.print(pwmstate, DEC);
+        CONFIG_SERIAL.print(' ');
+        CONFIG_SERIAL.print(1); // calibration present flag (placeholder)
+        CONFIG_SERIAL.print(' ');
+        CONFIG_SERIAL.print(brWheelFFB.offset); // center offset
+        CONFIG_SERIAL.print(' ');
+        CONFIG_SERIAL.print(0); // invert direction (not supported)
+        CONFIG_SERIAL.print(' ');
+        CONFIG_SERIAL.println(ROTATION_DEG);
+#else
+        CONFIG_SERIAL.println(0);
+#endif
+        break;
*** End Patch
