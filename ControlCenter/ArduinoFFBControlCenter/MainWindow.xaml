<Window x:Class="ArduinoFFBControlCenter.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:helpers="clr-namespace:ArduinoFFBControlCenter.Helpers"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="clr-namespace:ArduinoFFBControlCenter.ViewModels"
        mc:Ignorable="d"
        Title="Arduino FFB Control Center" Height="820" Width="1280" Icon="Assets/AppIcon.png"
        Background="{StaticResource AppBackground}"
        WindowStartupLocation="CenterScreen">

    <Window.DataContext>
        <vm:MainViewModel />
    </Window.DataContext>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="240" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <Border Grid.Column="0" Background="{StaticResource SideNavBackground}" BorderBrush="{StaticResource CardBorder}" BorderThickness="0,0,1,0">
            <DockPanel>
                <StackPanel Margin="20,24">
                    <TextBlock Text="Wheel Control Center" FontSize="18" FontWeight="Bold" Foreground="White" />
                    <TextBlock Text="Arduino FFB" FontSize="12" Foreground="{StaticResource MutedText}" Margin="0,4,0,16" />
                </StackPanel>

                <ListBox ItemsSource="{Binding NavigationItems}" SelectedItem="{Binding SelectedNavItem}" BorderThickness="0" Background="Transparent" Margin="12,0" HorizontalContentAlignment="Stretch">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <Button Content="{Binding Title}" Command="{Binding SelectCommand}" Style="{StaticResource NavButton}" />
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>

                <StackPanel Margin="16,12" VerticalAlignment="Bottom">
                    <TextBlock Text="Device" FontWeight="SemiBold" Foreground="White" />
                    <TextBlock Text="{Binding DeviceSummary}" FontSize="11" Foreground="{StaticResource MutedText}" TextWrapping="Wrap" Margin="0,6,0,0" />
                </StackPanel>
            </DockPanel>
        </Border>

        <Grid Grid.Column="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="64" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <Border Grid.Row="0" Background="{StaticResource TopBarBackground}" BorderBrush="{StaticResource CardBorder}" BorderThickness="0,0,0,1">
                <DockPanel Margin="20,8" LastChildFill="True">
                    <StackPanel Orientation="Horizontal" DockPanel.Dock="Left" VerticalAlignment="Center" helpers:PanelSpacing.Spacing="8">
                        <TextBlock Text="Status" Foreground="{StaticResource MutedText}" />
                        <Border Background="{Binding StatusBrush}" CornerRadius="8" Padding="8,2">
                            <TextBlock Text="{Binding StatusText}" Foreground="White" FontWeight="SemiBold" />
                        </Border>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" DockPanel.Dock="Right" VerticalAlignment="Center" helpers:PanelSpacing.Spacing="8">
                        <CheckBox Content="Beginner Mode" IsChecked="{Binding IsBeginnerMode}" Foreground="{StaticResource MutedText}" />
                        <CheckBox Content="Kid Mode" IsChecked="{Binding IsKidMode}" Foreground="{StaticResource MutedText}" />
                        <CheckBox Content="Demo Mode" IsChecked="{Binding IsDemoMode}" Foreground="{StaticResource MutedText}" />
                        <ComboBox Width="160" ItemsSource="{Binding AvailablePorts}" SelectedItem="{Binding SelectedPort}" />
                        <Button Content="Scan" Command="{Binding ScanPortsCommand}" Style="{StaticResource PrimaryButton}" />
                        <Button Content="{Binding ConnectButtonText}" Command="{Binding ToggleConnectCommand}" Style="{StaticResource AccentButton}" />
                    </StackPanel>
                </DockPanel>
            </Border>

            <ContentControl Grid.Row="1" Content="{Binding CurrentViewModel}" />
        </Grid>
    </Grid>
</Window>


